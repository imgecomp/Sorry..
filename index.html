<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>For You ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* --- GLOBAL STYLES --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            background: linear-gradient(180deg, #fff9e6 0%, #ffe6ee 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Quicksand', sans-serif;
            overflow: hidden;
        }

        /* --- CLICK TO START OVERLAY --- */
        #overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85);
            display: flex; justify-content: center; align-items: center;
            z-index: 2000; color: white; flex-direction: column;
            cursor: pointer;
            transition: opacity 0.5s;
        }
        #overlay h1 { font-family: 'Dancing Script', cursive; font-size: 3rem; margin-bottom: 20px; color: #fff; }
        .pulse-btn {
            background: #ff8fab; color: white; padding: 15px 40px; border-radius: 50px;
            font-size: 1.5rem; border: none; cursor: pointer; animation: pulse 1.5s infinite;
            font-weight: bold;
        }

        /* --- PAGES --- */
        .page {
            display: none;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            animation: fadeIn 0.8s ease-in-out;
        }

        .active-page { display: flex; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* --- CARDS --- */
        .card {
            background-color: #fffafb;
            width: 340px;          /* was 360px */
            padding: 26px;         /* was 30px */
            border-radius: 35px;
            box-shadow: 0 10px 25px rgba(235, 180, 190, 0.4);
            text-align: center;
            border: 4px solid #fff;
            position: relative;
            z-index: 10;
        }

        .image-container {
            width: 100%;
            height: 170px;         /* was 185px */
            background: linear-gradient(to bottom, #ffe6ee, #fff0f5);
            border-radius: 25px;
            display: flex;
            justify-content: center;
            align-items: flex-end;
            margin-bottom: 22px;   /* was 25px */
            border: 2px solid #fff;
            position: relative;
        }

        .character-img { 
            width: 120px;          /* was 130px */
            height: auto; 
            margin-bottom: 12px;   /* was 15px */
        }

        /* --- FLOWER DECORATIONS --- */
        .flower { position: absolute; font-size: 24px; color: #ff8fab; bottom: 30px; }
        .flower-left { left: 30px; }
        .flower-right { right: 30px; }

        h1, h2 { font-family: 'Dancing Script', cursive; color: #5d4037; margin-bottom: 10px; }
        h1 { font-size: 2.8rem; }
        h2 { font-size: 2.2rem; }
        
        p { color: #8d6e63; font-size: 1.1rem; line-height: 1.6; margin-bottom: 25px; font-weight: 500; }

        .btn {
            background-color: #e6c5d6;
            color: #4a3b3b;
            padding: 14px 40px;
            border: none;
            border-radius: 50px;
            font-weight: bold;
            font-family: 'Quicksand', sans-serif;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.2s, background 0.2s;
            font-size: 1.1rem;
        }
        .btn:hover { transform: scale(1.05); background-color: #dcb0c5; }

        .btn-container { display: flex; justify-content: center; gap: 15px; }
        .btn-no { background-color: #f0f0f0; color: #555; position: relative; }

        /* Polaroid Styles */
        .photo-frame {
            width: 100%;
            height: 240px;
            background: #fff;
            padding: 12px 12px 45px 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transform: rotate(-2deg);
            margin-bottom: 25px;
            position: relative;
            transition: transform 0.3s;
        }
        .photo-frame:hover { transform: rotate(0deg) scale(1.02); }
        .photo { width: 100%; height: 100%; object-fit: cover; border-radius: 2px; }
        .photo-slide { position: absolute; top: 12px; left: 12px; right: 12px; bottom: 45px; opacity: 0; transition: opacity 1s; }
        .photo-slide.active { opacity: 1; }

        /* Envelope Styles */
        .envelope-wrapper { position: relative; cursor: pointer; animation: floatEnvelope 3s ease-in-out infinite; }
        .envelope-wrapper.open { animation: none; cursor: default; }
        .envelope { 
            width: 340px;          /* was 360px */
            height: 240px;         /* was 250px */
            background: #ff8fab; position: relative; 
            border-radius: 0 0 15px 15px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); z-index: 2; 
        }
        .front-pocket { 
            position: absolute; bottom: 0; left: 0; width: 0; height: 0; 
            border-left: 170px solid transparent;  /* was 180px */
            border-right: 170px solid transparent; /* was 180px */
            border-bottom: 145px solid #f06292;    /* was 150px */
            border-radius: 0 0 15px 15px; z-index: 3; 
        }
        .flap { 
            position: absolute; top: 0; left: 0; width: 0; height: 0; 
            border-left: 170px solid transparent;  /* was 180px */
            border-right: 170px solid transparent; /* was 180px */
            border-top: 145px solid #ffb2c1;       /* was 150px */
            transform-origin: top; transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1); z-index: 4; 
        }
        .seal { position: absolute; top: 100px; left: 50%; transform: translateX(-50%); width: 50px; height: 50px; background: radial-gradient(circle at 30% 30%, #ffd700, #b8860b); border-radius: 50%; border: 2px solid #daa520; display: flex; align-items: center; justify-content: center; z-index: 5; color: #8b4513; font-size: 24px; transition: opacity 0.3s; }
        .letter-content { 
            position: absolute; bottom: 0; left: 50%; transform: translateX(-50%); 
            width: 310px;          /* was 330px */
            height: 220px;         /* was 230px */
            background: #fff; padding: 30px 20px; border-radius: 10px; text-align: center; z-index: 1; 
            transition: transform 0.8s cubic-bezier(0.68, -0.55, 0.27, 1.55); 
            background-image: linear-gradient(#f1f1f1 1px, transparent 1px); background-size: 100% 1.5em; 
        }
        
        @keyframes floatEnvelope { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        .envelope-wrapper.open .flap { transform: rotateX(180deg); z-index: 1; }
        .envelope-wrapper.open .seal { opacity: 0; transform: scale(0); }
        .envelope-wrapper.open .letter-content { transform: translateX(-50%) translateY(-120px); z-index: 6; height: auto; box-shadow: 0 15px 35px rgba(0,0,0,0.2); }
        .envelope-wrapper.open .envelope, .envelope-wrapper.open .front-pocket { transition: opacity 0.5s ease 1s; opacity: 0.6; }

        .sparkle { position: absolute; width: 8px; height: 8px; background: #ffd700; border-radius: 50%; pointer-events: none; opacity: 0; z-index: 10; box-shadow: 0 0 10px #ffd700; }
        @keyframes sparkle-anim { 0% { opacity: 1; transform: scale(0); } 50% { opacity: 1; transform: scale(1); } 100% { opacity: 0; transform: scale(0) translate(var(--tx), var(--ty)); } }
        .hint { margin-top: 80px; color: #bcaaa4; font-size: 0.9rem; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 0.6; } 50% { opacity: 1; } 100% { opacity: 0.6; } }

        .floating-heart { position: absolute; color: #ffccd5; z-index: 1; animation: float 6s infinite ease-in-out; pointer-events: none; }
        @keyframes float { 0%, 100% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-20px) rotate(10deg); } }

        /* Hidden YouTube Player */
        #youtube-player { position: absolute; width: 1px; height: 1px; opacity: 0; pointer-events: none; }
        .music-control { position: fixed; top: 20px; right: 20px; z-index: 100; font-size: 24px; cursor: pointer; background: white; border-radius: 50%; width: 45px; height: 45px; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }

    </style>
</head>
<body>

    <!-- üéµ HIDDEN YOUTUBE PLAYER FOR "TUM HO TOH" -->
    <div id="youtube-player"></div>

    <!-- Music Toggle -->
    <div class="music-control" onclick="toggleMusic()">üîä</div>

    <!-- CLICK TO START OVERLAY -->
    <div id="overlay" onclick="startExperience()">
        <h1>For You ‚ù§Ô∏è</h1>
        <button class="pulse-btn">Tap to Start</button>
        <p style="margin-top: 15px; font-size: 0.9rem; opacity: 0.8;">(Turn up your volume)</p>
    </div>

    <!-- Background Hearts -->
    <div class="floating-heart" style="top: 10%; left: 10%; font-size: 40px; transform: rotate(-15deg);">‚ô°</div>
    <div class="floating-heart" style="top: 15%; right: 10%; font-size: 30px; transform: rotate(10deg);">‚ô•</div>
    <div class="floating-heart" style="bottom: 20%; left: 5%; font-size: 25px; transform: rotate(-5deg);">‚ô•</div>
    <div class="floating-heart" style="bottom: 10%; right: 20%; font-size: 50px; opacity: 0.5;">‚ô°</div>
    <div class="floating-heart" style="top: 50%; left: 5%; font-size: 20px; opacity: 0.6;">‚ô•</div>

    <!-- PAGE 1: INTRO -->
    <div id="page1" class="page">
        <div class="card">
            <div class="image-container">
                <div class="flower flower-left">‚úø</div>
                <div class="flower flower-right">‚úø</div>
                <img src="intro.gif" alt="Cute" class="character-img">
            </div>
            <h1>Hey Cutiepie</h1>
            <p>Can we talk for a moment? There's something important I want to tell you.</p>
            <button class="btn" onclick="nextPage(2)">Continue ‚ô•</button>
        </div>
    </div>

    <!-- PAGE 2: APOLOGY -->
    <div id="page2" class="page">
        <div class="card">
            <div class="image-container">
                <div class="flower flower-left">‚úø</div>
                <div class="flower flower-right">‚úø</div>
                <img src="sad.gif" alt="Sad Cat" class="character-img">
            </div>
            <h1>I'm Sorry</h1>
            <p>I know I hurt you... and I've been feeling really bad about it.</p>
            <button class="btn" onclick="nextPage(3)">Next ‚ûù</button>
        </div>
    </div>

    <!-- PAGE 3: FORGIVE -->
    <div id="page3" class="page">
        <div class="card">
            <div class="image-container">
                <div class="flower flower-left">‚úø</div>
                <div class="flower flower-right">‚úø</div>
                <img src="please.gif" alt="Pleading" class="character-img">
            </div>
            <h2>Will you forgive me?</h2>
            <p>I promise to be better. Please? ü•∫</p>
            <div class="btn-container">
                <button class="btn" onclick="nextPage(4)">Yes</button>
                <button class="btn btn-no" id="noBtn" onmouseover="moveButton()" onclick="moveButton()">No</button>
            </div>
        </div>
    </div>

    <!-- PAGE 4: CELEBRATION -->
    <div id="page4" class="page">
        <div class="card">
            <div class="image-container">
                <div class="flower flower-left">‚úø</div>
                <div class="flower flower-right">‚úø</div>
                <img src="celebrate.gif" alt="Happy Cat" class="character-img">
            </div>
            <h1>Yay! ‚ù§Ô∏è</h1>
            <p>Thank you for forgiving me! I love you so much!</p>
            <button class="btn" onclick="nextPage(5)">Wait, look here...</button>
        </div>
    </div>

    <!-- PAGE 5: MEMORIES -->
    <div id="page5" class="page">
        <div class="card" style="width: 380px;">  <!-- was 400px -->
            <h1>Remember this?</h1>
            <div class="photo-frame">
                <!-- Replace photos here -->
                <img src="https://images.unsplash.com/photo-1518199266791-5375a83190b7?w=400" class="photo photo-slide active">
                <img src="https://images.unsplash.com/photo-1621112904887-419379ce6824?w=400" class="photo photo-slide">
                <img src="https://images.unsplash.com/photo-1529333166437-7750a6dd5a70?w=400" class="photo photo-slide">
            </div>
            <p>Let's make more beautiful memories together.</p>
            <button class="btn" onclick="nextPage(6)">My Promise ‚ûù</button>
        </div>
    </div>

    <!-- PAGE 6: LETTER -->
    <div id="page6" class="page">
        <div class="envelope-wrapper" id="envelopeWrapper" onclick="openEnvelope()">
            <div class="envelope">
                <div class="letter-content">
                    <h1>My Promise</h1>
                    <p>
                        Thank you for forgiving me. I promise to cherish you, listen to you, and make you smile every single day. <br><br>
                        You are my favorite person. ‚ù§Ô∏è
                    </p>
                </div>
                <div class="front-pocket"></div>
                <div class="flap"></div>
                <div class="seal">‚ù§</div>
            </div>
        </div>
        <p class="hint" id="hint-text">Tap to open</p>
    </div>

    <!-- YOUTUBE API SCRIPT -->
    <script src="https://www.youtube.com/iframe_api"></script>

    <script>
        // 1. YouTube Player Setup
        var player;
        function onYouTubeIframeAPIReady() {
            player = new YT.Player('youtube-player', {
                height: '0',
                width: '0',
                // Updated with "Tum Ho Toh" video ID
                videoId: 'rOUuGvJkBrQ', 
                playerVars: {
                    'autoplay': 0,
                    'controls': 0,
                    'loop': 1,
                    'playlist': 'rOUuGvJkBrQ' // Required for loop to work
                },
                events: {
                    'onReady': onPlayerReady
                }
            });
        }

        function onPlayerReady(event) {
            // Player is ready, waiting for click
            console.log("Music Ready");
        }

        // 2. Start Experience (Triggers Audio)
        function startExperience() {
            if (player && player.playVideo) {
                player.playVideo();
                player.setVolume(50); // Set volume to 50%
            }
            document.getElementById('overlay').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('overlay').style.display = 'none';
            }, 500);
            
            document.getElementById('page1').classList.add('active-page');
            document.getElementById('page1').style.display = 'flex';
        }

        function toggleMusic() {
            if (!player) return;
            var btn = document.querySelector('.music-control');
            if (player.getPlayerState() === 1) { // 1 = Playing
                player.pauseVideo();
                btn.innerText = "üîá";
            } else {
                player.playVideo();
                btn.innerText = "üîä";
            }
        }

        // 3. Navigation Logic
        function nextPage(pageNumber) {
            if (pageNumber === 5) stopCelebration();

            document.querySelectorAll('.page').forEach(p => {
                p.classList.remove('active-page');
                p.style.display = 'none';
            });
            
            let nextPage = document.getElementById('page' + pageNumber);
            nextPage.classList.add('active-page');
            nextPage.style.display = 'flex';

            if (pageNumber === 4) startCelebration();
            if (pageNumber === 5) startSlideshow();
        }

        // 4. Moving "No" Button
        function moveButton() {
            var btn = document.getElementById('noBtn');
            var x = Math.random() * (window.innerWidth - 100);
            var y = Math.random() * (window.innerHeight - 50);
            btn.style.position = 'fixed';
            btn.style.left = x + 'px';
            btn.style.top = y + 'px';
        }

        // 5. Confetti
        let confettiInterval = null;
        function startCelebration() {
            var count = 200;
            var defaults = { origin: { y: 0.7 }, colors: ['#ffccd5', '#ff8fab', '#e6c5d6', '#ffd700'] };

            function fire(particleRatio, opts) {
                confetti(Object.assign({}, defaults, opts, { particleCount: Math.floor(count * particleRatio) }));
            }
            
            fire(0.25, { spread: 26, startVelocity: 55 });
            fire(0.2, { spread: 60 });
            
            confettiInterval = true;
            var end = Date.now() + (15 * 1000); 

            (function frame() {
                if (confettiInterval !== true) return;
                confetti({
                    particleCount: 2, angle: 60, spread: 55, origin: { x: 0 }, colors: ['#ffccd5', '#ffd700']
                });
                confetti({
                    particleCount: 2, angle: 120, spread: 55, origin: { x: 1 }, colors: ['#ffccd5', '#ffd700']
                });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());
        }

        function stopCelebration() {
            confettiInterval = false; 
            confetti.reset(); 
        }

        // 6. Slideshow
        function startSlideshow() {
            let slides = document.querySelectorAll('.photo-slide');
            let currentSlide = 0;
            setInterval(() => {
                slides[currentSlide].classList.remove('active');
                currentSlide = (currentSlide + 1) % slides.length;
                slides[currentSlide].classList.add('active');
            }, 3000);
        }

        // 7. Envelope
        function openEnvelope() {
            const wrapper = document.getElementById('envelopeWrapper');
            if (!wrapper.classList.contains('open')) {
                wrapper.classList.add('open');
                document.getElementById('hint-text').style.display = 'none';
                createSparkles();
            }
        }

        function createSparkles() {
            const wrapper = document.getElementById('envelopeWrapper');
            for (let i = 0; i < 30; i++) {
                const sparkle = document.createElement('div');
                sparkle.classList.add('sparkle');
                const x = Math.random() * 300 - 150;
                const y = Math.random() * 100 - 50;
                sparkle.style.setProperty('--tx', (Math.random() - 0.5) * 100 + 'px');
                sparkle.style.setProperty('--ty', (Math.random() - 1) * 100 - 50 + 'px');
                sparkle.style.left = `calc(50% + ${x}px)`;
                sparkle.style.top = `calc(30% + ${y}px)`;
                sparkle.style.animation = `sparkle-anim 1s ease-out forwards ${Math.random() * 0.5 + 0.4}s`;
                wrapper.appendChild(sparkle);
                setTimeout(() => sparkle.remove(), 2000);
            }
        }
    </script>
</body>
</html>
        
